# Fundamental concepts

A signal is a notification to a process that an event has occurred. Signals are sometimes described as **software interrupts**. Signals are analogous to hardware interrupts in that they interrupt the normal flow of execution of a program; in most cases, it is not possible to predict exactly when a signal will arrive.

All signals are defined in library ``signal.h`` in C Standard Library.

## Linux signal

The C standard defines only 6 signals. They are all defined as macro in ``signal.h`` header (``csignal`` header in C++):

* ``SIGABRT`` (Signal Abort): Abnormal termination, such as is initiated by the function.
* ``SIGFPE`` (Signal Floating-Point Exception): Erroneous arithmetic operation, such as zero divide or an operation resulting in overflow (not necessarily with a floating-point operation).
* ``SIGILL`` (Signal Illegal Instruction): Invalid function image, such as an illegal instruction. This is generally due to a corruption in the code or to an attempt to execute data.
* ``SIGINT`` (Signal Interrupt): Interactive attention signal. Generally generated by the application user, like ``Ctr+C``
* ``SIGSEGV`` (Signal Segmentation Violation): Invalid access to storage − When a program tries to read or write outside the memory it is allocated for it.
* ``SIGTERM`` (Signal Terminate): Termination request sent to program.

``Unix`` and ``Unix-like`` operating systems (such as Linux) define more than 15 additional signals

```
1) SIGHUP	 2) SIGINT	 3) SIGQUIT	 4) SIGILL	 5) SIGTRAP
6) SIGABRT	 7) SIGBUS	 8) SIGFPE	 9) SIGKILL	10) SIGUSR1
11) SIGSEGV	12) SIGUSR2	13) SIGPIPE	14) SIGALRM	15) SIGTERM
16) SIGSTKFLT	17) SIGCHLD	18) SIGCONT	19) SIGSTOP	20) SIGTSTP
21) SIGTTIN	22) SIGTTOU	23) SIGURG	24) SIGXCPU	25) SIGXFSZ
26) SIGVTALRM	27) SIGPROF	28) SIGWINCH	29) SIGIO	30) SIGPWR
31) SIGSYS	34) SIGRTMIN	35) SIGRTMIN+1	36) SIGRTMIN+2	37) SIGRTMIN+3
38) SIGRTMIN+4	39) SIGRTMIN+5	40) SIGRTMIN+6	41) SIGRTMIN+7	42) SIGRTMIN+8
43) SIGRTMIN+9	44) SIGRTMIN+10	45) SIGRTMIN+11	46) SIGRTMIN+12	47) SIGRTMIN+13
48) SIGRTMIN+14	49) SIGRTMIN+15	50) SIGRTMAX-14	51) SIGRTMAX-13	52) SIGRTMAX-12
53) SIGRTMAX-11	54) SIGRTMAX-10	55) SIGRTMAX-9	56) SIGRTMAX-8	57) SIGRTMAX-7
58) SIGRTMAX-6	59) SIGRTMAX-5	60) SIGRTMAX-4	61) SIGRTMAX-3	62) SIGRTMAX-2
63) SIGRTMAX-1	64) SIGRTMAX	
```

``SIGUSR1`` and ``SIGUSR2`` are user defined signal

``SIGQUIT``: ``SIGQUIT`` signal is similar to ``SIGINT``

``SIGWINCH``: a signal sent upon the resizing of a window. When the number of columns or rows changes, ``SIGWINCH`` is raised to the foreground processes attached to the terminal.

``SIGKILL``: immediately terminate a process

## API

### signal()

``signal()``: sets a function to handle signal

```c
sighandler_t signal(int signum, sighandler_t signal_handler);
```

* ``signum``: The signal number to which a handling function is set.
* ``signal_handler``: The ``signal_handler`` function has prototype

```c
void signal_handler(int signal_number);
```

### sigaction()

```c
int sigaction(int signum, const struct sigaction *restrict act, struct sigaction *restrict oldact);
```

* ``act``: If act is non-NULL, the new action for signal ``signum`` is installed from ``act``.
* ``oldact``: If oldact is non-NULL, the previous action is saved in ``oldact``.

```c
struct sigaction 
{
	_sig_func_ptr sa_handler;
	sigset_t sa_mask;
	int sa_flags;
};
```

* ``sa_mask``: A mask of signals which should be blocked
* ``sa_flags``: A set of flags which modify the behavior of the signal.

### kill()

```c
int kill(pid_t pid, int sig);
```
Send signal (``sig``) to a process specified by ``pid``.

### sigset_t

* ``sigset_t``: represents a set of signals
* ``int sigemptyset (sigset_t *set)``: This function initializes the signal set set to exclude all of the defined signals. It always returns 0.
* ``int sigfillset (sigset_t *set)``: This function initializes the signal set set to include all of the defined signals. The return value is 0.
* ``int sigaddset (sigset_t *set, int signum)``: This function adds the signal ``signum`` to the signal set ``set``. All ``sigaddset()`` does is modify ``set``; it does not block or unblock any signals.
* ``int sigdelset (sigset_t *set, int signum)``: This function removes the signal ``signum`` from the signal set ``set``. All ``sigdelset`` does is modify ``set``; it does not block or unblock any signals. The return value and error conditions are the same as for sigaddset.
* ``int sigismember (const sigset_t *set, int signum)``: The ``sigismember`` function tests whether the signal signum is a member of the signal set ``set``. It returns ``1`` if the signal is in the ``set``, ``0`` if not, and ``-1`` if there is an error.

``int sigprocmask (int how, const sigset_t *restrict set, sigset_t *restrict oldset)``: The ``sigprocmask`` function is used to examine or change the calling process’s signal mask.

The last argument, ``oldset``, is used to return information about the old process signal. mask.

Values for the ``HOW`` argument to `sigprocmask'

```c
#define	SIG_BLOCK     0		 /* Block signals.  */
#define	SIG_UNBLOCK   1		 /* Unblock signals.  */
#define	SIG_SETMASK   2		 /* Set the set of blocked signals.  */
```
